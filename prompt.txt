MCPサーバーを自作することが私達の共通目標です。

私達のMCPサーバーを通して「できるようにしたいこと」は「MCPクライアント(LLM)が以下のような会話形式で返答できるようにする」ことです。

----

ユーザーのプロンプト:

'wakashu_mcp_server'で「遠慮したラップトップ和歌集」のランキング情報を取得してください。取得するのは第1回の和歌集のランキング1位から3位の投稿です。

MCPクライアント(LLMサービス):

'wakashu_mcp_server'で「遠慮したラップトップ和歌集」のランキング情報を取得します。取得するのは第1回の和歌集のランキング1位から3位の投稿です。

1位：@Laptopさん

<Picture1.png>

"正々堂々"

https://www.youtube.com/watch?v=8OZDgBmehbA

https://www.amazon.co.jp/gp/video/detail/B0CH9YSQ55/ref=atv_dp_share_cu_r

ジャケット生成に使ったプロンプト
「横を向いたカマキリのイラストを描いてください！」

2位：@Wakashuさん

<Picture2.png>

"'Winny'(2023)の作中、47氏は「ご飯3原則」を語っている。いわく「その１、熱くない。その２、辛くない。その３、食べにくくない。」あくまで推測の域を出ないけれど、これは「ロボット３原則」をオマージュした発言なのではないかと思う。工学出身の47氏だからあまり違和感はないし、47氏らしい感性だなと思う。"

https://www.amazon.co.jp/gp/video/detail/B0CH9YSQ55/ref=atv_dp_share_cu_r

ジャケット生成に使ったプロンプト
「デフォルメされたロボットらしいロボットの座っているイラストを描いてくれる？」

----

以下にMCPクライアントが参照するファイルの構造の例を示しますね。

----

'第1回'(dir)
-'1-Laptop'(dir)
--'Picture1.png'
--'TextData1.json'
-'2-Wakashu'(dir)
--'Picture2.png'
--'TextData2.json'
-'3-Enryo'(dir)
--'Picture3.jpg'
--'TextData3.json'

'第2回'(dir)
-'1-Tom'(dir)
--'Picture1.png'
--'TextData1.json'
-'2-Ema'(dir)
--'Picture2.png'
--'TextData2.json'
-'3-Noman'(dir)
--'Picture3.jpg'
--'TextData3.json'

----

現段階で想定している[TextData1.json]の中身を以下に示しますね。

----

[TextData1.json]
{
  "AccountName": "@Laptop",
  "HonkadoriWaka": "\"正々堂々\"",
  "Honka": [
    "https://www.youtube.com/watch?v=8OZDgBmehbA",
    "https://www.amazon.co.jp/gp/video/detail/B0CH9YSQ55/ref=atv_dp_share_cu_r"
  ],
  "Prompt": "「横を向いたカマキリのイラストを描いてください！」"
}

----

現段階で想定している[TextData2.json]の中身を以下に示しますね。

----

[TextData2.json]
{
  "AccountName": "@Wakashu",
  "HonkadoriWaka": "\"'Winny'(2023)の作中、47氏は「ご飯3原則」を語っている。いわく「その１、熱くない。その２、辛くない。その３、食べにくくない。」あくまで推測の域を出ないけれど、これは「ロボット３原則」をオマージュした発言なのではないかと思う。工学出身の47氏だからあまり違和感はないし、47氏らしい感性だなと思う。\"",
  "Honka": [
    "https://www.amazon.co.jp/gp/video/detail/B0CH9YSQ55/ref=atv_dp_share_cu_r"
  ],
  "Prompt": "「デフォルメされたロボットらしいロボットの座っているイラストを描いてくれる？」"
}

----

追加で、設計にあたって必要と思われる情報を以下に示します。不明な点やほかに必要な情報があれば遠慮なく私に伝えてくださいね。

----

・MCPクライアントにはclaude desktopを利用します。
・TypeScriptで実装していきます。
・ユーザーの要求(プロンプト)における「第1回」や「1位から3位」は固定ではなく、動的に指定されます。
・クライアントへの応答例では<Picture1.png>という形式が使われていますが、LLMにこれを画像として表示するように設計します。
・クライアントへの応答例では<Picture1.png>という形式が使われていますが、画像ファイルの形式は[.png]以外にも[.jpg]や[.jpeg],[.heic],[.webp]なども想定されます。
・MCPサーバーの開発者(ノードA)のローカル環境にあるディレクトリやファイル(リモートリソース)をMCPのリソース機能でユーザー(ノードB)のMCPクライアント(LLM)が参照できるように設計していきます。
・提示したファイル構造において、投稿順位とファイル名を一致させています（例: '1-Laptop' ディレクトリ内に 'Picture1.png' がある）。この順位とファイル名の関連性は、常に保たれるという前提で設計を進めていいです（例: 3位の投稿は常に3-XXXフォルダにあり、画像ファイル名はPicture3.pngである、など）
・HonkaのURLは複数記入されることもある点には留意してください。
・和歌集データ（例：第1回ディレクトリ群）が格納されているルートディレクトリの絶対パスは[/home/info-gather/wakashu_mcp_dir/wakashu_dir]です。

----

さて、これから私達のMCPサーバーの設計やそれを実装するコードを具体的に考えていきましょう。
考えがまとまり次第、

1.大まかな設計の説明

2.実装にあたってのADR(Architecture Decision Record)

3.開発していくのに必要になる手順の説明

4.実装に向けた各ファイルごとの実際のコード(省略は一切しないように心掛けてください)

5.テストするときの手順の説明,の5つを提示してください。

ゆっくりと段階的に考えていきましょうね。


